{% extends 'layouts/layout.twig' %}
{% block content %}

<main>
  <!-- Hero Section -->
  <section class="relative w-full gradient-bg overflow-hidden">
    <div class="relative z-10 mx-auto max-w-6xl px-4 py-20 md:py-28 text-center">
      <h1 class="font-display text-5xl md:text-7xl font-bold tracking-tight mb-6">
        <span class="gradient-text">Inna</span> Framework
      </h1>
      <p class="mt-4 text-lg md:text-xl text-neutral-dark/80 max-w-2xl mx-auto">
        A minimal PHP MVC framework by Payperlez for in-house apps, giving you full control.
      </p>
      <p class="mt-4 inline-flex items-center gap-2 rounded-full bg-white/80 backdrop-blur-sm px-4 py-2 text-sm text-neutral-dark ring-1 ring-border-primary shadow-sm">
        <span class="h-2 w-2 rounded-full bg-secondary animate-pulse"></span> v1.4.0
      </p>
      <div class="mt-8 flex flex-wrap items-center justify-center gap-4">
        <a href="#getting-started" class="btn-primary">
          Get Started
        </a>
        <a href="#routing" class="btn-secondary">
          Routing
        </a>
        <a href="#models-db" class="btn-secondary">
          Database
        </a>
      </div>
    </div>
  </section>

  <section class="w-full bg-white" id="getting-started">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Getting Started</h2>
      <p class="mt-2 text-neutral-dark/70">Requirements: PHP 8.0+, Composer, MySQL.</p>
      <ol class="mt-4 list-decimal space-y-2 pl-5 text-neutral-dark">
        <li>Install dependencies and configure environment:</li>
      </ol>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-bash">
      # HOW TO USE

    - Install composer globally. Do the following on a Linux. Visit [here](https://getcomposer.org/doc/00-intro.md) for windows.

    $php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
    $php -r "if (hash_file('sha384', 'composer-setup.php') === 'c8b085408188070d5f52bcfe4ecfbee5f727afa458b2573b8eaaf77b3419b0bf2768dc67c86944da1544f06fa544fd47') { echo 'Installer verified'.PHP_EOL; } else { echo 'Installer corrupt'.PHP_EOL; unlink('composer-setup.php'); exit(1); }"
    $php composer-setup.php
    $php -r "unlink('composer-setup.php');"
  
    $ sudo mv composer.phar /usr/local/bin/composer
 
    - Create a new project using composer.

    $ sudo composer create-project ekwachie/inna-framework [project_name] -s stable

    - Navigate to the project directory and install dependencies.
    $ cd [project_name]

    $ composer install

    $ composer update

    - Copy the .env.example file to .env and update the values for DB_DSN, DB_USER, DB_PASSWORD, DOMAIN.

    $ cp env.example .env
 
    # Update .env values for DB_DSN, DB_USER, DB_PASSWORD, DOMAIN

    - Generate Keys
    $ openssl rand -hex 32
  </code></pre>

      <ol start="2" class="mt-4 list-decimal space-y-2 pl-5 text-neutral-dark">
        <li>Run the app (configure your web server root to project directory):</li>
      </ol>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-bash">$php -S 127.0.0.1:8080
</code></pre>
      <p class="mt-2 text-neutral-dark">Entry point: <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">index.php</code>. Routes are registered and the app is executed.</p>
    </div>
  </section>

  <section class="w-full bg-neutral-light" id="routing">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Routing</h2>
      <p class="mt-2 text-neutral-dark">Define routes in <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">index.php</code> using <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">$app-&gt;router</code>:</p>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-php">$app-&gt;router-&gt;get('/', [HomeController::class, 'home']);
$app-&gt;router-&gt;get('/about', [HomeController::class, 'about']);
$app-&gt;router-&gt;get('/{ff}/{any:[\w\d-]+}', [HomeController::class, 'home']); // dynamic
$app-&gt;router-&gt;post('/ajax/{follow}', [AjaxController::class, 'follow']);
$</code></pre>
      <p class="mt-2 text-neutral-dark">The router supports dynamic parameters via curly braces and regex constraints.</p>
    </div>
  </section>

  <section class="w-full bg-white" id="controllers">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Controllers</h2>
      <p class="mt-2 text-neutral-dark">Controllers extend <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">app\Core\Controller</code> and render Twig views.</p>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-php">use app\Core\Controller;
use app\Core\Request;

class HomeController extends Controller
{
  public function home(Request $request)
  {
    return $this-&gt;render('home', [
      'static' =&gt; STATIC_URL,
      'date' =&gt; date('Y-m-d'),
    ]);
  }
}
$</code></pre>
      <p class="mt-4 text-neutral-dark">Utilities:</p>
      <ul class="mt-2 list-disc pl-6 text-neutral-dark space-y-1">
        <li><code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">$this-&gt;render(view, data)</code></li>
        <li><code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">$this-&gt;redirect()</code></li>
        <li><code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">$this-&gt;apiMessage(status, data, errorCode)</code></li>
      </ul>
    </div>
  </section>

  <section class="w-full bg-neutral-light" id="views">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Views (Twig)</h2>
      <p class="mt-2 text-neutral-dark">Views are in <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">public/views/</code> with layout and partial support. Custom Twig extensions live in <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">app/ext/AppExtension.php</code>.</p>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-twig">

  &lt;h1&gt;Hello INNA&lt;/h1&gt;
  &lt;p&gt;Static path: {{ static }}&lt;/p&gt;
  &lt;p&gt;Today: {{ date }}&lt;/p&gt;
  &lt;p&gt;Price filter: {{ 1250.5 | price }}&lt;/p&gt;
  &lt;p&gt;Area fn: {{ area(5, 10) }}&lt;/p&gt;

$</code></pre>
    </div>
  </section>

  <section class="w-full bg-white" id="models-db">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Models & Database</h2>
      <p class="mt-2 text-neutral-dark">Use <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">app\Core\DbModel</code> for DB access. Connection configured via <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">.env</code> in <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">config/config.php</code>.</p>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-php">use app\Core\DbModel;

class User extends DbModel
{
  public function findByUsername(string $username): array
  {
    return $this-&gt;select(
      "SELECT * FROM users WHERE username = :username",
      ['username' =&gt; $username]
    );
  }

  public function create(array $data): int
  {
    return (int)$this-&gt;insert('users', $data);
  }
}
$</code></pre>
      <p class="mt-2 text-neutral-dark">Helpers: <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">select</code>, <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">insert</code>, <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">insertUpdate</code>, <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">update</code>, <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">delete</code>, transactions, and parameter binding.</p>
    </div>
  </section>

  <section class="w-full bg-neutral-light" id="validation">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Validation</h2>
      <p class="mt-2 text-neutral-dark">Use <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">app\Core\Model</code> chainable validators.</p>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-php">$m = new \app\Core\Model();
$m-&gt;name('email')-&gt;value($email)-&gt;required()-&gt;pattern('email');
if (!$m-&gt;isSuccess()) {
  return $m-&gt;getErrors();
}
$</code></pre>
    </div>
  </section>

  <section class="w-full bg-white" id="middleware">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Middleware</h2>
      <p class="mt-2 text-neutral-dark">Extend <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">BaseMiddleware</code> and register in your controller.</p>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-php">use app\Core\Middlewares\AuthMiddleware;

class AccountController extends Controller
{
  public function __construct()
  {
    $this-&gt;middleware(new AuthMiddleware(['dashboard', 'profile']));
  }

  public function dashboard() { /* ... */ }
}
$</code></pre>
    </div>
  </section>

  <section class="w-full bg-neutral-light" id="sessions">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Sessions</h2>
      <p class="mt-2 text-neutral-dark">Session is initialized in <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">Application</code> and configurable in <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">Session.php</code>.</p>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-php">use app\Core\Utils\Session;

Session::set('user', ['id' =&gt; 1]);
$user = Session::get('user');
Session::unsert('user');
$</code></pre>
    </div>
  </section>

  <section class="w-full bg-white" id="security">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Security</h2>
      <ul class="mt-2 list-disc pl-6 text-neutral-dark space-y-2">
        <li><strong>Headers</strong>: CSP, HSTS, X-Content-Type-Options (in <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">config/config.php</code>)</li>
        <li><strong>Cookies</strong>: Secure, HttpOnly, SameSite</li>
        <li><strong>Password</strong>: Bcrypt with cost 12 (<code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">DUtil::passHash</code>, <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">passVerify</code>)</li>
        <li><strong>CSRF</strong>: <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">DUtil::csrf_token()</code> and <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">DUtil::csrf_verifier()</code></li>
        <li><strong>Encrypt/Decrypt</strong>: AES-256-CBC helpers</li>
      </ul>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-php">$token = \app\Core\Utils\DUtil::csrf_token();
// Verify on POST
if (!\app\Core\Utils\DUtil::csrf_verifier($_POST['csrf'] ?? '')) {
  \app\Core\Utils\DUtil::logCsrfFailure();
  \app\Core\Utils\DUtil::trackFailedCsrfAttempts();
  die('Invalid CSRF');
}
$</code></pre>
    </div>
  </section>

  <section class="w-full bg-neutral-light" id="migrations">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Migrations</h2>
      <p class="mt-2 text-neutral-dark">Generate and apply migrations:</p>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-bash">./migrations add users "id INT AUTO_INCREMENT PRIMARY KEY" "email VARCHAR(255) UNIQUE" "password VARCHAR(255)"
./migrations update
$</code></pre>
      <p class="mt-2 text-neutral-dark">Tables tracked in <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">migrations</code> table; scripts live under <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">./migration/</code>.</p>
    </div>
  </section>

  <section class="w-full bg-white" id="twig-extensions">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Twig Extensions</h2>
      <p class="mt-2 text-neutral-dark">Custom filter and function:</p>
      <ul class="mt-2 list-disc pl-6 text-neutral-dark space-y-1">
        <li><code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">{{ '{{' }} amount | price {{ '}}' }}</code> → GHS currency</li>
        <li><code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">{{ '{{' }} area(5, 10) {{ '}}' }}</code> → 50</li>
      </ul>
    </div>
  </section>

  <section class="w-full bg-neutral-light" id="alerts">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Flash Messages & Alerts</h2>
      <p class="mt-2 text-neutral-dark">Use <code class="rounded bg-white px-2 py-1 text-sm font-mono">$this-&gt;setFlash(type, message)</code> to display beautiful Tailwind alerts:</p>
      
      <div class="mt-6 space-y-4">
        <!-- Success Alert -->
        <div class="bg-green-50 text-green-800 border border-green-200 rounded-lg shadow-sm p-4 flex items-start gap-3">
          <div class="flex-shrink-0">
            <svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium">Success: Operation completed successfully!</p>
            <code class="text-xs text-green-700 mt-1 block">$this-&gt;setFlash('success', 'Operation completed successfully!');</code>
          </div>
        </div>

        <!-- Error Alert -->
        <div class="bg-red-50 text-red-800 border border-red-200 rounded-lg shadow-sm p-4 flex items-start gap-3">
          <div class="flex-shrink-0">
            <svg class="w-5 h-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium">Error: Something went wrong. Please try again.</p>
            <code class="text-xs text-red-700 mt-1 block">$this-&gt;setFlash('error', 'Something went wrong. Please try again.');</code>
          </div>
        </div>

        <!-- Warning Alert -->
        <div class="bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-lg shadow-sm p-4 flex items-start gap-3">
          <div class="flex-shrink-0">
            <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium">Warning: Please review your input before proceeding.</p>
            <code class="text-xs text-yellow-700 mt-1 block">$this-&gt;setFlash('warning', 'Please review your input before proceeding.');</code>
          </div>
        </div>

        <!-- Info Alert -->
        <div class="bg-blue-50 text-blue-800 border border-blue-200 rounded-lg shadow-sm p-4 flex items-start gap-3">
          <div class="flex-shrink-0">
            <svg class="w-5 h-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium">Info: Here's some helpful information for you.</p>
            <code class="text-xs text-blue-700 mt-1 block">$this-&gt;setFlash('info', 'Here\'s some helpful information for you.');</code>
          </div>
        </div>

        <!-- Danger Alert -->
        <div class="bg-red-50 text-red-800 border border-red-200 rounded-lg shadow-sm p-4 flex items-start gap-3">
          <div class="flex-shrink-0">
            <svg class="w-5 h-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium">Danger: Critical action required. Please proceed with caution.</p>
            <code class="text-xs text-red-700 mt-1 block">$this-&gt;setFlash('danger', 'Critical action required. Please proceed with caution.');</code>
          </div>
        </div>
      </div>

      <div class="mt-6 p-4 bg-white rounded-lg border border-border-primary">
        <p class="text-sm text-neutral-dark mb-2"><strong>Features:</strong></p>
        <ul class="text-sm text-neutral-dark space-y-1 list-disc pl-5">
          <li>Auto-dismisses after 5 seconds</li>
          <li>Smooth slide-in/out animations</li>
          <li>Manual close button</li>
          <li>Fixed position (top-right corner)</li>
          <li>Responsive design</li>
          <li>XSS protection with <code class="rounded bg-neutral-light px-1 py-0.5 text-xs">htmlspecialchars()</code></li>
        </ul>
      </div>

      <pre class="mt-4 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-php">// Example usage in a controller
class UserController extends Controller
{
    public function create(Request $request)
    {
        // ... validation logic ...
        
        if ($success) {
            return $this-&gt;render('users/index', [
                'flash' =&gt; $this-&gt;setFlash('success', 'User created successfully!')
            ]);
        } else {
            return $this-&gt;render('users/create', [
                'flash' =&gt; $this-&gt;setFlash('error', 'Failed to create user.')
            ]);
        }
    }
}
$</code></pre>
    </div>
  </section>

  <section class="w-full bg-neutral-light" id="config">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Configuration</h2>
      <p class="mt-2 text-neutral-dark">Edit <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">.env</code> and check <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">config/config.php</code> for security headers and constants.</p>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-env">DB_DSN=mysql:host=127.0.0.1;port=3306;dbname=inna;charset=utf8mb4
DB_USER=root
DB_PASSWORD=
DOMAIN=127.0.0.1:8080
$</code></pre>
      <p class="mt-2 text-neutral-dark">Constants available: <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">BASE_URL</code>, <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">STATIC_URL</code>, <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">MEDIA_URL</code>, <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">GEO_RDR</code>.</p>
    </div>
  </section>

  <section class="w-full bg-white" id="logging">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">Logging</h2>
      <p class="mt-2 text-neutral-dark">Access logs: <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">log/access/log_&lt;date&gt;.log</code>. CSRF failures logged daily. Activity logging via <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">DUtil::logActivity()</code> is wired in <code class="rounded bg-neutral-light px-2 py-1 text-sm font-mono">config/config.php</code>.</p>
    </div>
  </section>

  <section class="w-full bg-neutral-light" id="examples">
    <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-primary mb-4">End-to-end Example</h2>
      <p class="mt-2 text-neutral-dark">Route → Controller → Model → View</p>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-php">// index.php
$app-&gt;router-&gt;get('/users/{username:[\w-]+}', [UserController::class, 'show']);
$</code></pre>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-php">// app/Controllers/UserController.php
<br>
use app\Core\Controller;
use app\Core\Request;
use app\Models\User;
class UserController extends Controller
{
  public function show(Request $request)
  {
    $username = $request-&gt;getRouteParam('username');
    $user = (new User())-&gt;select(
      "SELECT username, email FROM users WHERE username = :u",
      ['u' =&gt; $username]
    );
    return $this-&gt;render('user/show', ['user' =&gt; $user[0] ?? null]);
  }
}
$</code></pre>
      <pre class="mt-3 overflow-auto rounded-lg bg-primary p-4 text-sm text-white shadow-lg"><code class="language-twig">{# public/views/user/show.twig #}

  {{ '{% if user %}' }}
    &lt;h2&gt;{{ '{{' }} user.username {{ '}}' }}&lt;/h2&gt;
    &lt;p&gt;{{ '{{' }} user.email {{ '}}' }}&lt;/p&gt;
  {{ '{% else %}' }}
    &lt;p&gt;User not found&lt;/p&gt;
  {{ '{% endif %}' }}

$</code></pre>
    </div>
  </section>

</main>

{% endblock %}
